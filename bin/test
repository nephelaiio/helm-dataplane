#!/usr/bin/env bash

function debug {
    make kubectl get all -- -n dataplane
    make strimzi-connector-trace
    make strimzi-connector-status
    make kubectl describe svc/dataplane-connect-api -- -n dataplane
    make kubectl logs svc/dataplane-connect-api -- -n dataplane
    make kubectl describe job/dataplane-registry-connector-restart -- -n dataplane
    make kubectl logs job/dataplane-registry-connector-restart -- -n dataplane
    make kubectl describe job/dataplane-metabase-app-setup -- -n dataplane
    make kubectl logs job/dataplane-metabase-app-setup -- -n dataplane
}

make template &&
    make molecule destroy &&
    make molecule create &&
    make images &&
    make molecule converge &&
    make wait &&
    make molecule verify &&
    make molecule side-effect &&
    make molecule verify

debug
